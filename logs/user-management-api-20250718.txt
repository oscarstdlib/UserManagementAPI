2025-07-18 22:42:45.474 -05:00 [INF] Executed DbCommand (305ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
CREATE DATABASE [UserManagementDB];
2025-07-18 22:42:45.649 -05:00 [INF] Executed DbCommand (136ms) [Parameters=[], CommandType='"Text"', CommandTimeout='60']
IF SERVERPROPERTY('EngineEdition') <> 5
BEGIN
    ALTER DATABASE [UserManagementDB] SET READ_COMMITTED_SNAPSHOT ON;
END;
2025-07-18 22:42:45.668 -05:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-18 22:42:45.673 -05:00 [INF] Acquiring an exclusive lock for migration application. See https://aka.ms/efcore-docs-migrations-lock for more information if this takes too long.
2025-07-18 22:42:45.694 -05:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_getapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session', @LockMode = 'Exclusive';
SELECT @result
2025-07-18 22:42:45.757 -05:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF OBJECT_ID(N'[__EFMigrationsHistory]') IS NULL
BEGIN
    CREATE TABLE [__EFMigrationsHistory] (
        [MigrationId] nvarchar(150) NOT NULL,
        [ProductVersion] nvarchar(32) NOT NULL,
        CONSTRAINT [PK___EFMigrationsHistory] PRIMARY KEY ([MigrationId])
    );
END;
2025-07-18 22:42:45.767 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2025-07-18 22:42:45.771 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2025-07-18 22:42:45.786 -05:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2025-07-18 22:42:45.797 -05:00 [INF] Applying migration '20250719034228_InitialCreate'.
2025-07-18 22:42:45.842 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Permisos] (
    [Id] int NOT NULL IDENTITY,
    [Nombre] nvarchar(50) NOT NULL,
    [Descripcion] nvarchar(200) NOT NULL,
    [Recurso] nvarchar(50) NOT NULL,
    [Accion] nvarchar(20) NOT NULL,
    [Activo] bit NOT NULL,
    [FechaCreacion] datetime2 NOT NULL,
    CONSTRAINT [PK_Permisos] PRIMARY KEY ([Id])
);
2025-07-18 22:42:45.847 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [Usuarios] (
    [Id] bigint NOT NULL IDENTITY,
    [NombreCompleto] nvarchar(100) NOT NULL,
    [Email] nvarchar(100) NOT NULL,
    [Password] nvarchar(100) NOT NULL,
    [UltimaConexion] datetime2 NOT NULL,
    [Pais] nvarchar(50) NOT NULL,
    [TipoUsuario] nvarchar(20) NOT NULL,
    [FechaCreacion] datetime2 NOT NULL,
    [Activo] bit NOT NULL,
    CONSTRAINT [PK_Usuarios] PRIMARY KEY ([Id])
);
2025-07-18 22:42:45.853 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE [UsuarioPermisos] (
    [PermisosId] int NOT NULL,
    [UsuariosId] bigint NOT NULL,
    CONSTRAINT [PK_UsuarioPermisos] PRIMARY KEY ([PermisosId], [UsuariosId]),
    CONSTRAINT [FK_UsuarioPermisos_Permisos_PermisosId] FOREIGN KEY ([PermisosId]) REFERENCES [Permisos] ([Id]) ON DELETE CASCADE,
    CONSTRAINT [FK_UsuarioPermisos_Usuarios_UsuariosId] FOREIGN KEY ([UsuariosId]) REFERENCES [Usuarios] ([Id]) ON DELETE CASCADE
);
2025-07-18 22:42:45.912 -05:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Accion', N'Activo', N'Descripcion', N'FechaCreacion', N'Nombre', N'Recurso') AND [object_id] = OBJECT_ID(N'[Permisos]'))
    SET IDENTITY_INSERT [Permisos] ON;
INSERT INTO [Permisos] ([Id], [Accion], [Activo], [Descripcion], [FechaCreacion], [Nombre], [Recurso])
VALUES (1, N'GET', CAST(1 AS bit), N'Permite leer información de usuarios', '2024-01-01T00:00:00.0000000', N'Leer Usuarios', N'usuarios'),
(2, N'POST', CAST(1 AS bit), N'Permite crear nuevos usuarios', '2024-01-01T00:00:00.0000000', N'Crear Usuarios', N'usuarios'),
(3, N'PUT', CAST(1 AS bit), N'Permite actualizar información de usuarios', '2024-01-01T00:00:00.0000000', N'Actualizar Usuarios', N'usuarios'),
(4, N'DELETE', CAST(1 AS bit), N'Permite eliminar usuarios', '2024-01-01T00:00:00.0000000', N'Eliminar Usuarios', N'usuarios'),
(5, N'GET', CAST(1 AS bit), N'Permite leer información de permisos', '2024-01-01T00:00:00.0000000', N'Leer Permisos', N'permisos'),
(6, N'POST', CAST(1 AS bit), N'Permite crear nuevos permisos', '2024-01-01T00:00:00.0000000', N'Crear Permisos', N'permisos'),
(7, N'PUT', CAST(1 AS bit), N'Permite actualizar información de permisos', '2024-01-01T00:00:00.0000000', N'Actualizar Permisos', N'permisos'),
(8, N'DELETE', CAST(1 AS bit), N'Permite eliminar permisos', '2024-01-01T00:00:00.0000000', N'Eliminar Permisos', N'permisos'),
(9, N'GET', CAST(1 AS bit), N'Permite leer información de países', '2024-01-01T00:00:00.0000000', N'Leer Países', N'paises');
IF EXISTS (SELECT * FROM [sys].[identity_columns] WHERE [name] IN (N'Id', N'Accion', N'Activo', N'Descripcion', N'FechaCreacion', N'Nombre', N'Recurso') AND [object_id] = OBJECT_ID(N'[Permisos]'))
    SET IDENTITY_INSERT [Permisos] OFF;
2025-07-18 22:42:45.920 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX [IX_UsuarioPermisos_UsuariosId] ON [UsuarioPermisos] ([UsuariosId]);
2025-07-18 22:42:45.923 -05:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX [IX_Usuarios_Email] ON [Usuarios] ([Email]);
2025-07-18 22:42:45.927 -05:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20250719034228_InitialCreate', N'9.0.7');
2025-07-18 22:42:45.936 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DECLARE @result int;
EXEC @result = sp_releaseapplock @Resource = '__EFMigrationsLock', @LockOwner = 'Session';
SELECT @result
2025-07-18 22:44:20.936 -05:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuarios] AS [u]
        WHERE [u].[Email] = N'admin@system.com') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-18 22:44:21.200 -05:00 [INF] Executed DbCommand (45ms) [Parameters=[@p0='?' (DbType = Boolean), @p1='?' (Size = 100), @p2='?' (DbType = DateTime2), @p3='?' (Size = 100), @p4='?' (Size = 50), @p5='?' (Size = 100), @p6='?' (Size = 20), @p7='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Usuarios] ([Activo], [Email], [FechaCreacion], [NombreCompleto], [Pais], [Password], [TipoUsuario], [UltimaConexion])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7);
2025-07-18 22:44:21.269 -05:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Accion], [p].[Activo], [p].[Descripcion], [p].[FechaCreacion], [p].[Nombre], [p].[Recurso]
FROM [Permisos] AS [p]
2025-07-18 22:44:21.357 -05:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int64), @p2='?' (DbType = Int32), @p3='?' (DbType = Int64), @p4='?' (DbType = Int32), @p5='?' (DbType = Int64), @p6='?' (DbType = Int32), @p7='?' (DbType = Int64), @p8='?' (DbType = Int32), @p9='?' (DbType = Int64), @p10='?' (DbType = Int32), @p11='?' (DbType = Int64), @p12='?' (DbType = Int32), @p13='?' (DbType = Int64), @p14='?' (DbType = Int32), @p15='?' (DbType = Int64), @p16='?' (DbType = Int32), @p17='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [UsuarioPermisos] ([PermisosId], [UsuariosId])
VALUES (@p0, @p1),
(@p2, @p3),
(@p4, @p5),
(@p6, @p7),
(@p8, @p9),
(@p10, @p11),
(@p12, @p13),
(@p14, @p15),
(@p16, @p17);
2025-07-18 22:44:21.359 -05:00 [INF] Default admin user created successfully
2025-07-18 22:44:21.391 -05:00 [INF] User profile is available. Using 'C:\Users\repar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-18 22:44:21.411 -05:00 [INF] Creating key {5cb48e90-7b98-48ed-8593-162698fc9c06} with creation date 2025-07-19 03:44:21Z, activation date 2025-07-19 03:44:21Z, and expiration date 2025-10-17 03:44:21Z.
2025-07-18 22:44:21.428 -05:00 [INF] Writing data to file 'C:\Users\repar\AppData\Local\ASP.NET\DataProtection-Keys\key-5cb48e90-7b98-48ed-8593-162698fc9c06.xml'.
2025-07-18 22:44:21.646 -05:00 [INF] Now listening on: http://localhost:5143
2025-07-18 22:44:21.651 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-18 22:44:21.653 -05:00 [INF] Hosting environment: Development
2025-07-18 22:44:21.654 -05:00 [INF] Content root path: C:\Users\repar\Desktop\serfinanazas\backend-api\UserManagementAPI
2025-07-18 22:44:30.413 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/ - null null
2025-07-18 22:44:30.501 -05:00 [WRN] Failed to determine the https port for redirect.
2025-07-18 22:44:31.722 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/ - 404 0 null 1311.2302ms
2025-07-18 22:44:31.757 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5143/, Response status code: 404
2025-07-18 22:44:31.765 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/ - null null
2025-07-18 22:44:31.773 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/ - 404 0 null 7.6598ms
2025-07-18 22:44:31.780 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5143/, Response status code: 404
2025-07-18 22:44:31.782 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/ - null null
2025-07-18 22:44:31.789 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/ - 404 0 null 6.6948ms
2025-07-18 22:44:31.797 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5143/, Response status code: 404
2025-07-18 22:44:31.800 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/ - null null
2025-07-18 22:44:31.803 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/ - 404 0 null 2.9322ms
2025-07-18 22:44:31.809 -05:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5143/, Response status code: 404
2025-07-18 22:46:56.260 -05:00 [INF] Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Usuarios] AS [u]
        WHERE [u].[Email] = N'admin@system.com') THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2025-07-18 22:46:56.361 -05:00 [INF] User profile is available. Using 'C:\Users\repar\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-07-18 22:46:56.477 -05:00 [INF] Now listening on: http://localhost:5143
2025-07-18 22:46:56.481 -05:00 [INF] Application started. Press Ctrl+C to shut down.
2025-07-18 22:46:56.482 -05:00 [INF] Hosting environment: Development
2025-07-18 22:46:56.484 -05:00 [INF] Content root path: C:\Users\repar\Desktop\serfinanazas\backend-api\UserManagementAPI
2025-07-18 22:46:59.639 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/ - null null
2025-07-18 22:46:59.692 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/ - 301 0 null 53.7298ms
2025-07-18 22:46:59.705 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/index.html - null null
2025-07-18 22:46:59.810 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/index.html - 200 null text/html;charset=utf-8 106.0743ms
2025-07-18 22:46:59.839 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/index.css - null null
2025-07-18 22:46:59.840 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger-ui.css - null null
2025-07-18 22:46:59.841 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger-ui-bundle.js - null null
2025-07-18 22:46:59.843 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger-ui-standalone-preset.js - null null
2025-07-18 22:46:59.844 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/index.js - null null
2025-07-18 22:46:59.873 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/index.js - 200 null application/javascript;charset=utf-8 28.4734ms
2025-07-18 22:46:59.887 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/index.css - 200 202 text/css 47.4134ms
2025-07-18 22:46:59.906 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger-ui.css - 200 155175 text/css 65.4615ms
2025-07-18 22:46:59.906 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger-ui-standalone-preset.js - 200 229223 text/javascript 62.6768ms
2025-07-18 22:46:59.913 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger-ui-bundle.js - 200 1485750 text/javascript 71.9712ms
2025-07-18 22:47:03.821 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/index.html - null null
2025-07-18 22:47:03.826 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/index.html - 200 null text/html;charset=utf-8 4.7593ms
2025-07-18 22:47:04.098 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - null null
2025-07-18 22:47:04.146 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/favicon-32x32.png - null null
2025-07-18 22:47:04.149 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/favicon-32x32.png - 200 628 image/png 3.1892ms
2025-07-18 22:47:04.299 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 200.513ms
2025-07-18 22:47:22.400 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/api/Paises - null null
2025-07-18 22:47:22.412 -05:00 [WRN] Failed to determine the https port for redirect.
2025-07-18 22:47:22.506 -05:00 [INF] Executing endpoint 'UserManagementAPI.Controllers.PaisesController.GetPaises (UserManagementAPI)'
2025-07-18 22:47:22.543 -05:00 [INF] Route matched with {action = "GetPaises", controller = "Paises"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.List`1[System.String]]] GetPaises() on controller UserManagementAPI.Controllers.PaisesController (UserManagementAPI).
2025-07-18 22:47:22.549 -05:00 [INF] Authorization failed for the request at filter 'UserManagementAPI.Attributes.AuthorizeAttribute'.
2025-07-18 22:47:22.562 -05:00 [INF] Executing ObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-07-18 22:47:22.714 -05:00 [INF] Executed action UserManagementAPI.Controllers.PaisesController.GetPaises (UserManagementAPI) in 163.5813ms
2025-07-18 22:47:22.717 -05:00 [INF] Executed endpoint 'UserManagementAPI.Controllers.PaisesController.GetPaises (UserManagementAPI)'
2025-07-18 22:47:22.718 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/api/Paises - 401 165 application/problem+json; charset=utf-8 318.259ms
2025-07-18 22:57:10.327 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/index.html - null null
2025-07-18 22:57:10.330 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/index.html - 200 null text/html;charset=utf-8 3.0492ms
2025-07-18 22:57:10.739 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - null null
2025-07-18 22:57:10.788 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 49.8298ms
2025-07-18 22:57:21.136 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/index.html - null null
2025-07-18 22:57:21.140 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/index.html - 200 null text/html;charset=utf-8 3.5724ms
2025-07-18 22:57:21.295 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - null null
2025-07-18 22:57:21.319 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 24.1196ms
2025-07-18 22:57:21.325 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/index.html - null null
2025-07-18 22:57:21.337 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/index.html - 200 null text/html;charset=utf-8 12.2865ms
2025-07-18 22:57:21.476 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - null null
2025-07-18 22:57:21.493 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 16.684ms
2025-07-18 23:00:05.017 -05:00 [INF] Request starting HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - null null
2025-07-18 23:00:05.065 -05:00 [INF] Request finished HTTP/1.1 GET http://localhost:5143/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 47.9485ms
